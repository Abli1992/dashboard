<div class="dashboard-container">
  <!-- Jump Section -->
  <div class="jump-card">
    <p class="jump-label">Jump to Section:</p>
    <div class="jump-buttons">
  <button
    *ngFor="let sec of sections"
    class="jump-btn"
    [class.active]="activeSection === sec.id"
    [disabled]="!sec.enabled"
    [class.disabled]="!sec.enabled"
    (click)="sec.enabled && scrollToSection(sec.id)"
  >
    {{ sec.title }}
  </button>
</div>

  </div>

  <!-- Main Sections -->
  <div
    *ngFor="let section of sections"
    [attr.id]="section.id"
    class="section-card"
  >
    <!-- Section Header -->
    <div class="section-header">
      <div class="section-header-left">
        <h3>{{ section.title }}</h3>
        <label class="switch">
          <input type="checkbox" [(ngModel)]="section.enabled" />
          <span class="slider"></span>
        </label>
      </div>
      <button (click)="section.favorite = !section.favorite" class="star-btn">
        <i
          [ngClass]="
            section.favorite
              ? 'ti ti-star-filled text-yellow-400'
              : 'ti ti-star text-gray-400'
          "
          class="text-xl"
        ></i>
      </button>
    </div>

    <!-- ✅ Enabled State -->
    <div *ngIf="section.enabled; else disabledState">
      <!-- Filter Row -->
      <div class="filter-bar">
        <!-- Left -->
        <div class="filter-left">
          <span class="text-gray-700 font-medium">
            Total Recovered:
            <span class="text-green-600 font-bold">
              {{ formatMoney(section.totalRecovered) }}
            </span>
          </span>

          <!-- Date -->
          <div class="flex items-center gap-2">
            <label class="text-gray-700 font-medium">Time Period</label>
            <div class="date-field">
              <i class="ti ti-calendar"></i>
              <input
                type="date"
                class="date-control"
                placeholder="dd/mm/yyyy"
                [(ngModel)]="selectedDate"
              />
            </div>
          </div>

          <!-- Filter -->
          <button class="filter-btn" (click)="applyFilter()">
            <i class="ti ti-filter"></i> Filter
          </button>

          <!-- Country -->
          <div class="flex items-center gap-2">
            <label class="text-gray-700 font-medium">Country</label>
            <select [(ngModel)]="filterCountry" class="styled-select">
              <option>All</option>
              <option *ngFor="let c of ['US', 'CA', 'UK', 'DE', 'FR']">
                {{ c }}
              </option>
            </select>
          </div>

          <!-- Currency -->
          <div class="flex items-center gap-2">
            <label class="text-gray-700 font-medium">Currency</label>
            <select [(ngModel)]="filterCurrency" class="styled-select">
              <option>USD</option>
              <option>EUR</option>
            </select>
          </div>
        </div>

        <!-- Right -->
        <div class="filter-right">
          <button class="download-btn">
            <i class="ti ti-download"></i> Download
          </button>
        </div>
      </div>

      <!-- ✅ Table -->
      <div *ngIf="section.rows.length > 0; else noData" class="mt-4">
        <table>
          <thead>
            <tr>
              <th>COUNTRY</th>
              <th>VC NAME</th>
              <th>DISPUTE ID</th>
              <th>RESOLUTION DATE</th>
              <th>AMOUNT</th>
              <th class="text-center">DOWNLOAD BACKUP REPORT</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let row of section.rows">
              <td>{{ row.country }}</td>
              <td>{{ row.vcName }}</td>
              <td>{{ row.disputeId }}</td>
              <td>{{ row.resolutionDate }}</td>
              <td class="text-green-600 font-semibold">
                {{ formatMoney(row.amount) }}
              </td>
              <td class="text-center">
                <a
                  href="#"
                  class="download-link"
                  (click)="downloadRow(row.disputeId)"
                >
                  Link
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #noData>
        <div class="empty-state">
          <p>No {{ section.title }} data available.</p>
        </div>
      </ng-template>
    </div>

    <!-- ❌ Disabled State -->
    <ng-template #disabledState>
      <div class="empty-state">
        <p>{{ section.emptyMessage }}</p>
        <p class="mt-2 service">What is the service?</p>
        <p class="mt-1 service">Would you like to opt in?</p>
        <button class="enable-btn">
          Enable {{ section.title }}
        </button>
      </div>
    </ng-template>
  </div>
</div>
