<div class="space-y-8 p-6 bg-gray-50 min-h-screen">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <div>
      <h1 class="text-2xl font-bold text-gray-900">News & Announcements</h1>
      <p class="text-gray-600 mt-1">
        Create and manage alerts and announcements for users
      </p>
    </div>
    <button
      (click)="toggleForm()"
      class="flex items-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md font-medium"
    >
      <i class="fa-solid fa-plus"></i>
      {{ showForm ? 'Close' : 'Create Alert' }}
    </button>
  </div>

  <!-- Create Alert Form -->
  <div *ngIf="showForm" class="bg-white border rounded-lg shadow-sm p-6">
    <h3 class="text-lg font-semibold flex items-center gap-2 mb-4">
      <i class="fa-regular fa-message"></i>
      Create New Alert
    </h3>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
          <input
            type="text"
            formControlName="title"
            placeholder="Enter alert title..."
            class="border border-gray-300 rounded-md w-full px-3 py-2 text-sm"
          />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Alert Type</label>
          <select
            formControlName="alertType"
            class="border border-gray-300 rounded-md w-full px-3 py-2 text-sm"
          >
            <option value="announcement">Announcement</option>
            <option value="alert">Alert</option>
            <option value="warning">Warning</option>
            <option value="info">Information</option>
          </select>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Body of Text</label>
        <textarea
          formControlName="message"
          placeholder="Enter the full message content..."
          class="border border-gray-300 rounded-md w-full px-3 py-2 text-sm min-h-[120px]"
        ></textarea>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Priority</label>
          <select
            formControlName="priority"
            class="border border-gray-300 rounded-md w-full px-3 py-2 text-sm"
          >
            <option value="high">High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Target Audience</label>
          <select
            formControlName="targetAudience"
            class="border border-gray-300 rounded-md w-full px-3 py-2 text-sm"
          >
            <option value="external">External Users</option>
            <option value="internal">Internal Users</option>
            <option value="both">Both</option>
          </select>
        </div>
      </div>

      <div class="flex gap-3 pt-4">
        <button
          type="submit"
          [disabled]="isSubmitting"
          class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-md flex items-center gap-2"
        >
          <i class="fa-solid fa-upload"></i>
          {{ isSubmitting ? 'Publishing...' : 'Upload' }}
        </button>
        <button
          type="button"
          (click)="toggleForm()"
          class="border border-gray-300 rounded-md px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>

  <!-- Manage Existing Alerts -->
  <div class="bg-white border rounded-lg shadow-sm p-6">
    <h3 class="text-lg font-semibold mb-4">Manage Existing Alerts</h3>

    <div *ngIf="isLoading" class="text-center text-gray-500 py-8">
      Loading alerts...
    </div>

    <div *ngIf="!isLoading && filteredAlerts.length === 0" class="text-center text-gray-500 py-8">
      No alerts created yet
    </div>

    <div *ngIf="!isLoading && filteredAlerts.length > 0" class="space-y-3">
      <div
        *ngFor="let alert of filteredAlerts"
        class="flex items-start justify-between p-4 border border-gray-200 rounded-lg bg-gray-50"
      >
        <div class="flex-1">
          <div class="flex items-center gap-2 mb-2">
            <i class="fa-solid" [ngClass]="getAlertIcon(alert.alertType)"></i>
            <h4 class="font-medium text-gray-900">{{ alert.title }}</h4>
            <span
              class="text-xs px-2 py-1 rounded-md border font-medium"
              [ngClass]="getPriorityColor(alert.priority)"
            >
              {{ alert.priority }}
            </span>
            <span class="text-xs px-2 py-1 rounded-md border bg-gray-100 text-gray-700">
              {{ alert.targetAudience }}
            </span>
          </div>
          <p class="text-sm text-gray-600">{{ alert.message }}</p>
          <p class="text-xs text-gray-400 mt-2">
            Created: {{ alert.createdAt | date: 'M/d/yyyy' }}
          </p>
        </div>
        <button
          (click)="handleDelete(alert.id)"
          class="text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md p-2"
        >
          <i class="fa-solid fa-trash"></i>
        </button>
      </div>
    </div>
  </div>
</div>
